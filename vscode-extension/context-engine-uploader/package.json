{
  "name": "context-engine-uploader",
  "displayName": "Context Engine Uploader",
  "description": "Runs the Context-Engine remote upload client with a force sync on startup followed by watch mode. Requires Python with pip install requests urllib3 charset_normalizer.",
  "version": "0.1.34",
  "publisher": "context-engine",
  "engines": {
    "vscode": "^1.85.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "onStartupFinished",
    "onCommand:contextEngineUploader.start",
    "onCommand:contextEngineUploader.stop",
    "onCommand:contextEngineUploader.restart",
    "onView:contextEngineUploaderProfiles",
    "onView:contextEngineUploaderStatus",
    "onView:contextEngineUploaderActions",
    "onCommand:contextEngineUploader.promptEnhance",
    "onCommand:contextEngineUploader.authLogin",
    "onCommand:contextEngineUploader.cloneAndStartStack",
    "onCommand:contextEngineUploader.startSavedStack"
  ],
  "main": "./extension.js",
  "icon": "assets/icon.png",
  "contributes": {
    "commands": [
      {
        "command": "contextEngineUploader.start",
        "title": "Context Engine Uploader: Start"
      },
      {
        "command": "contextEngineUploader.stop",
        "title": "Context Engine Uploader: Stop"
      },
      {
        "command": "contextEngineUploader.restart",
        "title": "Context Engine Uploader: Restart"
      },
      {
        "command": "contextEngineUploader.indexCodebase",
        "title": "Context Engine Uploader: Index Codebase"
      },
      {
        "command": "contextEngineUploader.uploadGitHistory",
        "title": "Context Engine Uploader: Upload Git History (force sync bundle)"
      },
      {
        "command": "contextEngineUploader.startMcpHttpBridge",
        "title": "Context Engine Uploader: Start MCP HTTP Bridge"
      },
      {
        "command": "contextEngineUploader.stopMcpHttpBridge",
        "title": "Context Engine Uploader: Stop MCP HTTP Bridge"
      },
      {
        "command": "contextEngineUploader.writeMcpConfig",
        "title": "Context Engine Uploader: Write MCP Config (.mcp.json)"
      },
      {
        "command": "contextEngineUploader.writeCtxConfig",
        "title": "Context Engine Uploader: Write CTX Config (ctx_config.json/.env)"
      },
      {
        "command": "contextEngineUploader.showUploadServiceLogs",
        "title": "Context Engine Uploader: Show Extension Output"
      },
      {
        "command": "contextEngineUploader.tailUploadServiceLogs",
        "title": "Context Engine Uploader: Tail Upload Service Logs (Docker)"
      },
      {
        "command": "contextEngineUploader.promptEnhance",
        "title": "Context Engine Uploader: Prompt+ (Unicorn Mode)"
      },
      {
        "command": "contextEngineUploader.authLogin",
        "title": "Context Engine Uploader: Sign In (ctxce auth)"
      },
      {
        "command": "contextEngineUploader.cloneAndStartStack",
        "title": "Context Engine Uploader: Clone Stack & Run docker compose"
      },
      {
        "command": "contextEngineUploader.startSavedStack",
        "title": "Context Engine Uploader: Start Saved Stack (docker compose up)"
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "contextEngineUploader",
          "title": "Context Engine",
          "icon": "assets/activitybar.svg"
        }
      ]
    },
    "views": {
      "contextEngineUploader": [
        {
          "id": "contextEngineUploaderProfiles",
          "name": "Profiles"
        },
        {
          "id": "contextEngineUploaderStatus",
          "name": "Status"
        },
        {
          "id": "contextEngineUploaderActions",
          "name": "Actions"
        }
      ]
    },
    "configuration": {
      "type": "object",
      "title": "Context Engine Uploader",
      "properties": {
        "contextEngineUploader.runOnStartup": {
          "type": "boolean",
          "default": false,
          "description": "Run the force sync followed by watch after VS Code finishes startup."
        },
        "contextEngineUploader.pythonPath": {
          "type": "string",
          "default": "python3",
          "description": "Python executable used to run scripts.remote_upload_client. E.G. 'python' or 'python3'"
        },
        "contextEngineUploader.scriptWorkingDirectory": {
          "type": "string",
          "default": "",
          "description": "Optional override for the folder that contains standalone_upload_client.py. Defaults to the extension install directory or the workspace ./scripts folder."
        },
        "contextEngineUploader.decoderRuntime": {
          "type": "string",
          "enum": ["glm", "llamacpp"],
          "default": "glm",
          "description": "Preferred decoder runtime for ctx.py scaffolding (controls REFRAG_RUNTIME in ctx_config.json/.env)."
        },
        "contextEngineUploader.decoderUrl": {
          "type": "string",
          "default": "http://localhost:8081",
          "description": "Override DECODER_URL when running Prompt+ (ctx.py unicorn mode). Defaults to local llama.cpp on :8081 (appends /completion automatically)."
        },
        "contextEngineUploader.useGpuDecoder": {
          "type": "boolean",
          "default": false,
          "description": "Prefer GPU decoder for Prompt+ (sets USE_GPU_DECODER=1 so ctx.py targets the GPU llama.cpp sidecar on :8081)."
        },
        "contextEngineUploader.targetPath": {
          "type": "string",
          "default": "",
          "description": "Path to pass to --path for remote upload."
        },
        "contextEngineUploader.endpoint": {
          "type": "string",
          "default": "http://localhost:8004",
          "description": "Endpoint URL for the remote upload client."
        },
        "contextEngineUploader.intervalSeconds": {
          "type": "number",
          "default": 5,
          "minimum": 1,
          "description": "Interval in seconds for watch mode polling."
        },
        "contextEngineUploader.extraForceArgs": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "Additional CLI arguments appended to the force sync."
        },
        "contextEngineUploader.extraWatchArgs": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "Additional CLI arguments appended to watch mode."
        },
        "contextEngineUploader.hostRoot": {
          "type": "string",
          "default": "",
          "description": "Host path prefix that should be rewritten to the container root before uploads. Defaults to targetPath."
        },
        "contextEngineUploader.containerRoot": {
          "type": "string",
          "default": "/work",
          "description": "Container path that mirrors the host root on the upload server."
        },
        "contextEngineUploader.startWatchAfterForce": {
          "type": "boolean",
          "default": true,
          "description": "After a force index completes, automatically launch watch mode."
        },
        "contextEngineUploader.mcpClaudeEnabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable writing the project-local .mcp.json used by Claude Code MCP clients."
        },
        "contextEngineUploader.mcpWindsurfEnabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable writing Windsurf's global MCP config (requires Windsurf or compatible clients)."
        },
        "contextEngineUploader.autoWriteMcpConfigOnStartup": {
          "type": "boolean",
          "default": false,
          "description": "When enabled, automatically run 'Write MCP Config' on extension activation to keep .mcp.json, Windsurf mcp_config.json, and .claude/settings.local.json in sync with settings and the current extension version."
        },
        "contextEngineUploader.mcpTransportMode": {
          "type": "string",
          "enum": ["sse-remote", "http"],
          "default": "http",
          "description": "Transport layer for MCP servers. 'sse-remote' runs stdio MCP processes behind an SSE tunnel; 'http' uses direct HTTP MCP endpoints. Combined with mcpServerMode this yields four modes: bridge-stdio, bridge-http, direct-sse, direct-http.",
          "enumDescriptions": [
            "Use stdio MCP processes behind an SSE tunnel (bridge-stdio / direct-sse).",
            "Use HTTP MCP endpoints directly (bridge-http / direct-http)."
          ]
        },
        "contextEngineUploader.autoStartMcpBridge": {
          "type": "boolean",
          "default": true,
          "description": "When enabled and mcpServerMode='bridge' with mcpTransportMode='http', automatically start the local ctx-mcp-bridge HTTP server for the active workspace so IDE clients can connect over HTTP without manual commands. Has no effect in stdio/direct modes."
        },
        "contextEngineUploader.mcpBridgePort": {
          "type": "number",
          "default": 30810,
          "description": "Port used for the local ctx-mcp-bridge HTTP server when auto-starting from the VS Code extension. Change if multiple IDE windows need parallel bridges."
        },
        "contextEngineUploader.mcpBridgeBinPath": {
          "type": "string",
          "default": "",
          "description": "Optional path to the ctxce CLI binary/script to use for the MCP bridge in local development. When set and the file exists, the extension runs this path via the current Node executable instead of using CTXCE_BRIDGE_BIN or 'npx @context-engine-bridge/context-engine-mcp-bridge'."
        },
        "contextEngineUploader.mcpBridgeLocalOnly": {
          "type": "boolean",
          "default": false,
          "description": "Development toggle. When true (default) the extension prefers local bridge binaries resolved from mcpBridgeBinPath or CTXCE_BRIDGE_BIN before falling back to the published npm build via npx."
        },
        "contextEngineUploader.mcpServerMode": {
          "type": "string",
          "enum": ["bridge", "direct"],
          "default": "bridge",
          "description": "MCP wiring style. 'bridge' writes a single 'context-engine' server that uses the ctxce MCP bridge (stdio when mcpTransportMode='sse-remote', HTTP when 'http'). 'direct' writes two servers ('qdrant-indexer' and 'memory'), using stdio when mcpTransportMode='sse-remote' and HTTP when 'http'.",
          "enumDescriptions": [
            "Single 'context-engine' server powered by the ctxce bridge (stdio or HTTP depending on mcpTransportMode).",
            "Two separate servers: 'qdrant-indexer' and 'memory' (stdio or HTTP depending on mcpTransportMode)."
          ]
        },
        "contextEngineUploader.mcpIndexerUrl": {
          "type": "string",
          "default": "http://localhost:8003/mcp",
          "description": "Claude Code MCP server URL for the Qdrant indexer. Used when writing MCP configs."
        },
        "contextEngineUploader.mcpMemoryUrl": {
          "type": "string",
          "default": "http://localhost:8002/mcp",
          "description": "Claude Code MCP server URL for the memory/search MCP server. Used when writing MCP configs."
        },
        "contextEngineUploader.ctxIndexerUrl": {
          "type": "string",
          "default": "http://localhost:8003/mcp",
          "description": "CTX MCP indexer HTTP endpoint (MCP_INDEXER_URL) used by ctx.py when enhancing prompts via the Claude hook."
        },
        "contextEngineUploader.windsurfMcpPath": {
          "type": "string",
          "default": "",
          "description": "Optional override for Windsurf's mcp_config.json path. Defaults to %USERPROFILE%/.codeium/windsurf/mcp_config.json."
        },
        "contextEngineUploader.claudeHookEnabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable writing the workspace .claude/settings.local.json hooks section for the Context Engine Claude Code hook."
        },
        "contextEngineUploader.surfaceQdrantCollectionHint": {
          "type": "boolean",
          "default": false,
          "description": "When enabled and Claude MCP + hook configs are written, the CTX Claude hook adds a brief hint line with the Qdrant collection ID to enhanced prompts."
        },
        "contextEngineUploader.devRemoteMode": {
          "type": "boolean",
          "default": false,
          "description": "Enable dev-remote upload mode for the standalone upload client. When enabled, the extension sets REMOTE_UPLOAD_MODE=development and DEV_REMOTE_MODE=1 for the child process, causing standalone_upload_client.py to ignore any 'dev-workspace' directories when scanning for files to upload."
        },
        "contextEngineUploader.scaffoldCtxConfig": {
          "type": "boolean",
          "default": true,
          "description": "When enabled, the extension can create or update a minimal ctx_config.json and .env in the targetPath using the inferred collection name from the upload client."
        },
        "contextEngineUploader.glmApiKey": {
          "type": "string",
          "default": "",
          "description": "GLM API key used by ctx.py when REFRAG_RUNTIME=glm. When scaffolding, this value is written to glm_api_key in ctx_config.json and GLM_API_KEY in .env if those fields are missing."
        },
        "contextEngineUploader.glmApiBase": {
          "type": "string",
          "default": "https://api.z.ai/api/coding/paas/v4/",
          "description": "GLM API base URL (GLM_API_BASE) used by refrag_glm/ctx.py when REFRAG_RUNTIME=glm."
        },
        "contextEngineUploader.glmModel": {
          "type": "string",
          "default": "glm-4.6",
          "description": "GLM model name (GLM_MODEL) used by refrag_glm/ctx.py when REFRAG_RUNTIME=glm."
        },
        "contextEngineUploader.gitMaxCommits": {
          "type": "number",
          "default": 500,
          "minimum": 0,
          "description": "Upper bound for REMOTE_UPLOAD_GIT_MAX_COMMITS passed to the upload clients via .env/child process environment. Set to 0 or a negative value to disable git history collection."
        },
        "contextEngineUploader.gitSince": {
          "type": "string",
          "default": "",
          "description": "Optional REMOTE_UPLOAD_GIT_SINCE constraint (e.g. '2 years ago' or '2023-01-01') passed to the upload clients via .env/child process environment. Leave empty to use the clients' default behavior."
        }
      }
    }
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/m1rl0k/Context-Engine"
  }
}
